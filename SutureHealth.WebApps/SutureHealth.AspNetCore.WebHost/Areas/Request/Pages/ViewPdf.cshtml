@page "/request/{requestId:int}/pdf"
@model SutureHealth.AspNetCore.Areas.Request.Pages.ViewPdfModel
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>SutureHealth - PDF Viewer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
    <link rel="stylesheet" href="~/css/SutureSign.min.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Site.min.css" asp-append-version="true" />
    <link href="~/images/logo2_emblem.png" type="image/x-icon" rel="shortcut icon" />
    <style type="text/css">
        html, body, form {
            margin: 0;
            height: 100%;
            width: 100%;
            font-family: Open Sans,Verdana,Arial;
        }

        #form1 {
            display: flex;
            flex-direction: column;
        }

        #divBanner {
            display: -webkit-flex;
            display: -moz-flex;
            display: -ms-flexbox;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            background-color: #333;
            padding: 8px;
        }

            #divBanner p {
                color: white;
                font-size: small;
                margin: 2px;
            }

        div#divPDF, object#objPdf {
            box-sizing: border-box;
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }

        @@media print {
            #divBanner {
                display: none;
            }

            #divPDF {
            }

            #divPrint {
                display: block;
                overflow: visible;
            }
        }

        .image__section {
            width: 20%;
            float: left;
        }

        .button__section {
            float: left;
            width: 20%;
        }

        .text__section {
            float: left;
            width: 40%;
            font-size: 12px;
            color: #fff;
        }

        .close__button__section .TrackingButton120x30 {
            float: right !important;
        }

        #divBanner {
            padding: 8px !important;
            height: 60px;
        }

        @@media (max-width: 1387px) {
            #divBanner {
                height: 70px !important;
            }
        }

        @@media (max-width: 1024px) {
            #divBanner {
                height: 70px !important;
            }
        }

        @@media (max-width: 768px) {
            #divBanner {
                height: 100px !important;
            }
        }
    </style>
</head>
<body>
@Html.AntiForgeryToken()
    <div id="divBanner">
        <div class="image__section">
            <img src="/images/logo2_white_125x30.png" />
        </div>
        <div class="button__section">
            <button id="downloadButton" class="btn btn-primary">Download</button>
        </div>
        <div class="text__section">
            <b>Print:</b> Simply click the print icon on the hover control that your browser displays.<br />
            Alternatively, right-click the PDF below, then select 'Print', or download then print.
        </div>
        <div class="close__button__section">
            <button id="closeButton" class="btn btn-secondary">Close</button>
        </div>
    </div>
    <div id="divPDF">
        <object id="objPdf" type="application/pdf" data="@Model.PdfDataHandlerUrl" title="PDF">
            <param name="src" value="@Model.PdfUrl" />
            <p>It appears you don't have a PDF plugin for this browser. No biggie... you can click <a href="@Model.PdfUrl">here</a> to download the PDF file.</p>
        </object>
    </div>
</body>
<script type="text/javascript">

    function docReady(fn) {
        // see if DOM is already available
        if (document.readyState === "complete" || document.readyState === "interactive") {
            // call on next available tick
            setTimeout(fn, 1);
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    }


    docReady(function() {
        document.getElementById("closeButton").onclick = function() {
            window.focus();
            window.close();
            return false;
        };
        document.getElementById("downloadButton").onclick = function() {
            window.open("@Model.PdfUrl", "_blank");
        };
    });

</script>
</html>